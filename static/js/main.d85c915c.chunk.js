(this.webpackJsonprefugee=this.webpackJsonprefugee||[]).push([[0],{151:function(e,t,n){e.exports=n(320)},156:function(e,t,n){},157:function(e,t,n){},158:function(e,t,n){},315:function(e,t,n){},316:function(e,t,n){},317:function(e,t,n){},318:function(e,t,n){},320:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(42),o=n.n(c),i=(n(156),n(157),n(7)),u=(n(158),n(10)),s=function(e){return{type:"GET_PROCESS_FAIL",payload:e}},l=function(e){return{type:"GET_PROCESS_ID_FAIL",payload:e}},p=function(e){return{type:"PUT_PROCESS_ID_SUCCESS",payload:e}},d=function(e){return{type:"PUT_PROCESS_ID_FAIL",payload:e}},m=function(e){return{type:"DELETE_PROCESS_ID_FAIL",payload:e}},f=n(63),b=n(3),E={stories:[],isLoading:!1,error:""};var v=n(15),g=n.n(v),O=n(17),S=n.n(O),h="https://refugee-stories-build-week.herokuapp.com",x=S.a.create({baseURL:h,headers:{Authorization:window.sessionStorage.getItem("token")}}),y=function(e,t){return function(n){var a;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:"PUT_PROCESS_ID_START"}),r.prev=1,r.next=4,g.a.awrap(x.put("".concat(h,"/api/stories/process/").concat(e),t));case 4:a=r.sent,console.log(a),n(p(a.data)),r.next=13;break;case 9:r.prev=9,r.t0=r.catch(1),console.error(r.t0.response.data.Error),n(d(r.t0));case 13:case"end":return r.stop()}}),null,null,[[1,9]])}},j=function(e){return function(t){var n;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:"DELETE_PROCESS_ID_START"}),a.prev=1,a.next=4,g.a.awrap(x.delete("".concat(h,"/api/stories/process/").concat(e)));case 4:n=a.sent,t({type:"DELETE_PROCESS_ID_SUCCESS",payload:n.data}),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),console.error(a.t0.response.data.Error),t(m(a.t0));case 12:case"end":return a.stop()}}),null,null,[[1,8]])}},_=n(11);function C(){var e=Object(_.b)(),t=Object(_.c)((function(e){return e.processReducer.stories})),n=Object(a.useCallback)((function(){e((function(e){var t;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e({type:"GET_PROCESS_START"}),n.prev=1,n.next=4,g.a.awrap(x.get("".concat(h,"/api/stories/process")));case 4:t=n.sent,console.log(t),e({type:"GET_PROCESS_SUCCESS",payload:t.data}),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),console.error(n.t0.response.data.Error),e(s(n.t0));case 13:case"end":return n.stop()}}),null,null,[[1,9]])}))}),[e]);return Object(a.useEffect)((function(){n()}),[n]),[t,n]}function w(e){var t=Object(_.b)(),n=Object(_.c)((function(t){return t.processReducer.stories.find((function(t){return Number(t.id)===Number(e)}))})),r=Object(a.useCallback)((function(){t(function(e){return function(t){var n;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:"GET_PROCESS_ID_START"}),a.prev=1,a.next=4,g.a.awrap(x.get("".concat(h,"/api/stories/process/").concat(e)));case 4:n=a.sent,t({type:"GET_PROCESS_ID_SUCCESS",payload:n.data}),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),console.error(a.t0.response.data.Error),t(l(a.t0));case 12:case"end":return a.stop()}}),null,null,[[1,8]])}}(e))}),[t,e]);return Object(a.useEffect)((function(){r()}),[r]),[n,r]}var T=function(e){return{type:"SET_TOKEN",payload:e}},R={token:""};function L(e){var t=Object(_.b)();return[Object(_.c)((function(e){return e.tokenReducer.token})),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;t(T(n))}]}var k=n(27),I=n(142),N=Object(k.c)({tokenReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"GET_TOKEN":return Object(b.a)({},e);case"SET_TOKEN":return Object(b.a)({},e,{token:a});default:return e}},processReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"GET_PROCESS_START":return Object(b.a)({},e,{isLoading:!0});case"GET_PROCESS_SUCCESS":return Object(b.a)({},e,{stories:Object(f.a)(a),isLoading:!1});case"GET_PROCESS_FAIL":return Object(b.a)({},e,{error:a,isLoading:!1});case"GET_PROCESS_ID_START":return Object(b.a)({},e,{isLoading:!0});case"GET_PROCESS_ID_SUCCESS":return e.stories.findIndex((function(e){return e.id===a.id}))>-1?Object(b.a)({},e,{isLoading:!1}):Object(b.a)({},e,{stories:[].concat(Object(f.a)(e.stories),[a]),isLoading:!1});case"GET_PROCESS_ID_FAIL":return Object(b.a)({},e,{error:a,isLoading:!1});case"PUT_PROCESS_ID_START":return Object(b.a)({},e,{isLoading:!0});case"PUT_PROCESS_ID_SUCCESS":return Object(b.a)({},e,{stories:[].concat(Object(f.a)(e.stories.filter((function(e){return e.id!==a.id}))),[a]),isLoading:!1});case"PUT_PROCESS_ID_FAIL":return Object(b.a)({},e,{error:a,isLoading:!1});case"DELETE_PROCESS_ID_START":return Object(b.a)({},e,{isLoading:!0});case"DELETE_PROCESS_ID_SUCCESS":return Object(b.a)({},e,{stories:e.stories.filter((function(e){return e.id!==a.id})),isLoading:!1});case"DELETE_PROCESS_ID_FAIL":return Object(b.a)({},e,{error:a,isLoading:!1});default:return e}}}),D=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||k.d,P=Object(k.e)(N,D(Object(k.a)(I.a)));function A(){var e=L(),t=Object(i.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{className:"nav"},r.a.createElement("a",{href:"\r\nhttps://refugee-stories-ui.netlify.com/"},"Home"),r.a.createElement(u.c,{activeClassName:"active",to:"/submitstory"},"Submit Story"),r.a.createElement(u.c,{activeClassName:"active",to:"/stories"},"Stories"),n?r.a.createElement(r.a.Fragment,null,r.a.createElement(u.c,{activeClassName:"active",to:"/process"},"Process"),r.a.createElement(u.c,{onClick:function(){a(void 0)},exact:!0,to:"/"},"Logout")):r.a.createElement(r.a.Fragment,null,r.a.createElement(u.c,{activeClassName:"active",to:"/login"},"Login"),r.a.createElement(u.c,{activeClassName:"active",to:"/signup"},"Signup")))}var F=n(25),U=n(8),G=n(322),z=n(9);function B(){var e=Object(U.a)(["\n  color: black;\n  font-size: 20px;\n"]);return B=function(){return e},e}function q(){var e=Object(U.a)(["\n  color: black;\n  font-size: 2.5rem;\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n"]);return q=function(){return e},e}function K(){var e=Object(U.a)(["\n  width: 80%;\n  text-align: center;\n  justify-content: center;\n  margin: 10px auto;\n  padding: 10px;\n"]);return K=function(){return e},e}function H(){var e=Object(U.a)(["\n  width: 50%;\n  text-align: center;\n  justify-content: center;\n  margin: 10px auto;\n  padding: 10px;\n"]);return H=function(){return e},e}function M(){var e=Object(U.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 25%;\n  text-align: center;\n  justify-content: center;\n  margin: 10px auto;\n  padding: 30px;\n  border: 1.5px solid #2b2b2b;\n  box-shadow: 5px 10px 18px #888888;\n"]);return M=function(){return e},e}function W(){var e=Object(U.a)(["\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n  background: transparent;\n  border-radius: 5px;\n  border-color: grey;\n  color: black;\n  margin: 10px auto;\n  padding: 10px;\n  font-size: 15px;\n  width: 20%;\n"]);return W=function(){return e},e}var J=z.a.button(W()),V=z.a.form(M()),X=z.a.input(H()),Y=z.a.textarea(K()),$=z.a.h1(q()),Q=z.a.label(B());function Z(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)({name:"",location:"",date:"",textbody:""}),u=Object(i.a)(o,2),s=u[0],l=u[1],p=function(e){l(Object(b.a)({},s,Object(F.a)({},e.target.name,e.target.value))),console.log(e.target.name)};return r.a.createElement("div",null,r.a.createElement($,null,"Submit your story here:"),r.a.createElement(V,{onSubmit:function(e){e.preventDefault(),S.a.post("".concat(h,"/api/stories/process"),s).then((function(){l({name:"",location:"",date:"",textbody:""})})),console.log(s)}},r.a.createElement(Q,{htmlFor:"nameInput"},"Name: "),r.a.createElement(X,{onChange:p,maxLength:"15",placeholder:"Name",id:"nameInput",name:"name",value:s.name,type:"text"}),r.a.createElement(Q,{htmlFor:"locationInput"},"Location: "),r.a.createElement(X,{onChange:p,maxLength:"15",placeholder:"Location",id:"locationInput",name:"location",value:s.location,type:"text"}),r.a.createElement(Q,{htmlFor:"dateInput"},"Date: "),r.a.createElement(X,{onChange:p,maxLength:"15",placeholder:"Date",id:"dateInput",name:"date",value:s.date,type:"date"}),r.a.createElement(Q,{htmlFor:"story"},"Your Story:"),r.a.createElement(Y,{onChange:p,id:"story",name:"textbody",placeholder:"What's your story?",maxLength:"328",value:s.textbody}),r.a.createElement(J,{onClick:function(){c(!0)}},"Submit Story")),r.a.createElement(G.a,{color:"primary",isOpen:n,toggle:function(){return c(!1)}},"Thank you for submitting your story!"))}var ee=n(28);function te(){var e=Object(U.a)(["\n  color: black;\n  font-size: 2.5rem;\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n"]);return te=function(){return e},e}function ne(){var e=Object(U.a)(["\n  color: black;\n  font-size: 20px;\n"]);return ne=function(){return e},e}function ae(){var e=Object(U.a)(["\n  width: 50%;\n  text-align: center;\n  justify-content: center;\n  margin: 10px auto;\n  padding: 10px;\n"]);return ae=function(){return e},e}function re(){var e=Object(U.a)(["\ndisplay:flex;\nflex-direction:column;\nwidth:25%;\ntext-align:center;\njustify-content:center;\nmargin:10px auto;\npadding: 30px;\nborder: 1.5px solid #2B2B2B;\nbox-shadow: 5px 10px 18px #888888;\n"]);return re=function(){return e},e}function ce(){var e=Object(U.a)(["\n\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n  background: transparent;\n  border-radius: 5px;\n  border-color: grey;\n  color: black;\n  margin: 10px auto;\n  padding: 10px;\n  font-size: 15px;\n  width: 20%;\n"]);return ce=function(){return e},e}var oe=z.a.button(ce()),ie=z.a.form(re()),ue=z.a.input(ae()),se=z.a.label(ne()),le=z.a.h1(te());function pe(){var e=L(),t=Object(i.a)(e,2),n=(t[0],t[1]),c=Object(ee.f)(),o={username:"",password:""},u=Object(a.useState)(o),s=Object(i.a)(u,2),l=s[0],p=s[1],d=function(e){p(Object(b.a)({},l,Object(F.a)({},e.target.name,e.target.value))),console.log(e.target.name)};return r.a.createElement("div",null,r.a.createElement(le,null,"Login Page"),r.a.createElement(ie,{onSubmit:function(e){e.preventDefault(),S.a.post("".concat(h,"/api/auth/login"),l).then((function(e){console.log(e),n(e.data.token),p(o),c.push("/process")})).catch((function(e){return console.error(e)}))}},r.a.createElement(se,{htmlFor:"userNameInput"},"Username: "),r.a.createElement(ue,{maxLength:"20",placeholder:"Username Here",id:"userNameInput",name:"username",value:l.username,onChange:d,type:"text"}),r.a.createElement(se,{htmlFor:"userNamePassword"},"Password: "),r.a.createElement(ue,{maxLength:"20",placeholder:"Password Here",id:"userNamePassword",name:"password",value:l.password,onChange:d,type:"password"}),r.a.createElement(oe,{type:"submit"},"Login")))}var de=n(34),me=n(62);n(315);function fe(){var e=Object(U.a)(["\n\n  text-align: center;\n  justify-content: center;\n  align-items: center;\n  background: transparent;\n  border-radius: 5px;\n  border-color: grey;\n  color: black;\n  margin: 10px auto;\n  padding: 10px;\n  font-size: 15px;\n  width: 20%;\n"]);return fe=function(){return e},e}var be=z.a.button(fe());function Ee(){var e=Object(ee.f)(),t=L(),n=Object(i.a)(t,2),a=(n[0],n[1]);return r.a.createElement("div",{className:"signup"},r.a.createElement(de.d,{initialValues:{username:"",password:""},validationSchema:me.object({username:me.string().min(4,"Must be 4 characters or more").required("Required"),password:me.string().min(6,"Must be 6 characters or more").required("Required")}),onSubmit:function(t,n){var r=n.resetForm;(function(e){var t;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.a.awrap(S.a.post("".concat(h,"/api/auth/register"),e));case 3:return n.sent,n.next=6,g.a.awrap(S.a.post("".concat(h,"/api/auth/login"),e));case 6:return t=n.sent,a(t.data.token),console.log(t),n.abrupt("return",t);case 12:n.prev=12,n.t0=n.catch(0),console.error(n.t0);case 15:case"end":return n.stop()}}),null,null,[[0,12]])})(t).then((function(t){r(),e.push("/")}))}},(function(e){var t=e.isSubmitting;return r.a.createElement(de.c,{className:"signup form"},r.a.createElement("h1",null,"Sign up here:"),r.a.createElement("label",{htmlFor:"username"},"username: "),r.a.createElement(de.b,{id:"username",type:"text",name:"username",placeholder:"type username"}),r.a.createElement(de.a,{name:"username",className:"error",component:"div"}),r.a.createElement("label",{htmlFor:"password"},"password: "),r.a.createElement(de.b,{autoComplete:"off",id:"password",type:"password",name:"password",placeholder:"type password"}),r.a.createElement(de.a,{name:"password",className:"error",component:"div"}),r.a.createElement(be,{type:"submit",className:"submit",disabled:t},"Submit"))})))}function ve(){var e=Object(U.a)(["\n\nfont-size:25px;\n\n"]);return ve=function(){return e},e}function ge(){var e=Object(U.a)(["\n\nfont-size: 40px;\n\n\n\n"]);return ge=function(){return e},e}function Oe(){var e=Object(U.a)(["\n\ndisplay: flex;\nflex-direction: column;\nalign-items: center;\njustify-content: space-between;\nborder:1px solid grey;\nwidth: 50%;\nmargin: 5px auto;\nbox-shadow: 2px 1px 7px #888888;\n"]);return Oe=function(){return e},e}var Se=z.a.div(Oe()),he=z.a.h2(ge()),xe=z.a.h3(ve()),ye=function(e){return console.log(e),r.a.createElement(Se,{key:e.stories.name},r.a.createElement(he,null,e.name),r.a.createElement(xe,null,e.location),r.a.createElement("h4",null,e.date),r.a.createElement("p",null,e.textbody))};function je(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){S.a.get("https://refugee-stories-build-week.herokuapp.com/api/stories/approved").then((function(e){console.log(e.data),c(e.data)})).catch((function(e){console.log("data not returned",e)}))}),[]),r.a.createElement("div",{className:"peoples"},n.map((function(e){return r.a.createElement(ye,{stories:e,key:e.name,name:e.name,location:e.location,date:e.date,textbody:e.textbody})})))}var _e=n(148);function Ce(e){var t=e.component,n=Object(_e.a)(e,["component"]),a=function(){var e=Object(_.b)();return[Object(_.c)((function(e){return e.tokenReducer.token})),function(){return e({type:"GET_TOKEN"})}]}(),c=Object(i.a)(a,1)[0];return r.a.createElement(ee.b,Object.assign({},n,{render:function(e){return c?r.a.createElement(t,e):r.a.createElement(ee.a,{to:"/login"})}}))}function we(e){var t=e.item,n=t.name,a=t.location,c=t.date,o=t.textbody,i=t.approved;return r.a.createElement(u.b,{className:"process-item",to:"/process/".concat(t.id)},r.a.createElement("div",null,"Name: ",n),r.a.createElement("div",null,"Location: ",a),r.a.createElement("div",null,"Data: ",c),r.a.createElement("div",null,"Status: ",i?"Approved":"Denied"),r.a.createElement("div",null,"Story:"),r.a.createElement("div",{className:"text"},o))}n(316);function Te(){var e=C(),t=Object(i.a)(e,1)[0];return r.a.createElement("div",{className:"process"},t.map((function(e){return r.a.createElement(we,{key:e.id,item:e})})))}n(317);function Re(){var e=Object(ee.g)().id,t=Object(ee.f)(),n=w(e),a=Object(i.a)(n,1)[0],c=a.name,o=a.location,u=a.date,s=a.approved,l=a.textbody,p=function(e){var t=Object(_.b)();return[Object(_.c)((function(t){return t.processReducer.stories.find((function(t){return t.id===e}))})),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;t(j(n))}]}(e),d=Object(i.a)(p,2),m=(d[0],d[1]),f=function(e){var t=Object(_.b)();return[Object(_.c)((function(t){return t.processReducer.stories.find((function(t){return t.id===e}))})),function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;t(y(a,n))}]}(e),E=Object(i.a)(f,2),v=(E[0],E[1]);return r.a.createElement("div",{className:"processId"},r.a.createElement("div",null,"Name: ",c),r.a.createElement("div",null,"Location: ",o),r.a.createElement("div",null,"Data: ",u),r.a.createElement("div",null,"Status: ",s?"Approved":"Denied"),r.a.createElement("div",null,"Story:"),r.a.createElement("div",{className:"text"},l),r.a.createElement("div",{className:"action"},r.a.createElement("button",{className:"process-action",onClick:function(){var e=Object(b.a)({},a,{approved:!s});v(e),t.push("/")}},s?"Denied":"Approve"),r.a.createElement("button",{className:"process-action",onClick:function(){m(),t.push("/")}},"Delete")))}n(318);function Le(){var e=new Date;return r.a.createElement("div",{className:"footer"},"\xa9Refugee ",e.getFullYear())}var ke=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(A,null),r.a.createElement(ee.b,{path:"/submitstory",component:Z}),r.a.createElement(ee.b,{path:"/login",component:pe}),r.a.createElement(ee.b,{path:"/signup",component:Ee}),r.a.createElement(ee.b,{path:"/stories",component:je}),r.a.createElement(Ce,{exact:!0,path:"/process",component:Te}),r.a.createElement(Ce,{path:"/process/:id",component:Re}),r.a.createElement(Le,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(319);o.a.render(r.a.createElement(_.a,{store:P},r.a.createElement(u.a,{basename:"/React"},">",r.a.createElement(ke,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[151,1,2]]]);
//# sourceMappingURL=main.d85c915c.chunk.js.map